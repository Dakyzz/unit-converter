<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    form {
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 25px;
        height: fit-content;
        width: fit-content;
        gap: 5%;
        display: grid;
        font-family: sans-serif;

    }

    input,
    select,
    button {
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 5px;
    }

    button {
        color: white;
        background-color: #222;
    }
div{
        display: flex;
        justify-content: space-around;
        margin-bottom: 10px;
    }
    button:hover {
        transition: .5s;
        background-color: #444;
    }
</style>

<body>
    <form action="">
        <div>
        <a href="temperatureConverter.html">
            <button type="button">temp Converter</button>
        </a>
        <a href="weightConverter.html">
            <button type="button">weight Converter</button>
        </a>
        </div>
        <label for="">Enter Length to convert
            <input type="text" id="input-number">
        </label>
        <label for="">Unit to convert from
            <select name="" id="from-unit">
                <option value="meter">meter</option>
                <option value="cm">cm</option>
                <option value="dm">dm</option>
                <option value="mm">mm</option>
                <option value="feet">feet</option>
                <option value="inch">inch</option>
                <option value="km">km</option>
                <option value="mi">mi</option>
                <option value="yard">yard</option>
            </select>
        </label>
        <label for="">Unit to convert to
            <select name="" id="to-unit">
                <option value="meter">meter</option>
                <option value="cm">cm</option>
                <option value="dm">dm</option>
                <option value="mm">mm</option>
                <option value="feet">feet</option>
                <option value="inch">inch</option>
                <option value="km">km</option>
                <option value="mi">mi</option>
                <option value="yard">yard</option>
            </select>
        </label>
        <button id="submit">submit</button>
        <p id="result"></p>
    </form>
</body>

</html>
<script>
    let submittedForm = document.querySelector('form')
    let result = document.getElementById('result');

    submittedForm.addEventListener('submit', (event) => {
        event.preventDefault();

        const inputValue = parseFloat(document.getElementById('input-number').value);
        const fromUnit = document.getElementById('from-unit').value;
        const toUnit = document.getElementById('to-unit').value;
        if (isNaN(inputValue)) {
            result.innerText = 'please enter a valid number';
            return;
        }
        fetch('http://localhost:3000/convert-length', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    value: inputValue,
                    from: fromUnit,
                    to: toUnit
                })
            })
            .then(res => res.json())
            .then(data => {
                result.innerText = `Converted ${data.convertedValue.toFixed(4)} ${toUnit}`
            })
            .catch(e => {
                result.innerText = "Error: ", e.message;
            })
    })
</script>